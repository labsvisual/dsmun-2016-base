<div ng-controller="AdministratorDashboardController as ctrl">

    <h1 class="ui header">
        <span style="font-weight: 300;">Administrative Management Console</span>
        <h3 class="ui sub header">
            <div style="display: inline;" class="ui green">
                <span>{{ ctrl.data.teacher_escort }} </span>
            </div>
        </h3>
    </h1>

    <div class="dashboard__conference--controller">

        <h2>Conferences</h2>

        <table class="ui sortable celled table">

            <thead>

                <tr>

                    <th ng-class="( ctrl.sortType === 'schoolName' ? ( ctrl.sortReverse ? 'sorted descending' : 'sorted ascending' ) : '' )" ng-click="ctrl.ChangeSort( 'schoolName' )">School Name</th>
                    <th ng-class="( ctrl.sortType === 'isConfirmed' ? ( ctrl.sortReverse ? 'sorted descending' : 'sorted ascending' ) : '' )" ng-click="ctrl.ChangeSort( 'isConfirmed' )">Status</th>
                    <th>Actions</th>

                </tr>

            </thead>

            <tbody>

                <tr ng-repeat="conference in ctrl.allConferences | orderBy:ctrl.sortType:ctrl.sortReverse">

                    <td>
                        {{ conference.schoolName }}
                    </td>

                    <td>
                        {{ ( conference.isConfirmed ? "Confirmed" : ( conference.areFormsFilled ? "All Forms Filled" : "Unconfirmed" ) ) }}
                    </td>
                    <td>
                        <div class="four ui buttons">

                            <button ng-click="ctrl.ConfirmConference( conference.conferenceGuid )" class="ui button" ng-class="( conference.isConfirmed ? 'green' : 'primary labeled icon' )" ng-disabled="!conference.areFormsFilled || ctrl.isProcessing || conference.isConfirmed">
                                <i class="checkmark icon"></i>
                                {{ ( conference.isConfirmed ? "Conference Confirmed" : ctrl.isProcessing ? "Processing..." : ( ctrl.hasButtonMessage ) ? ctrl.buttonMessage : "Confirm Conference" ) }}
                            </button>
                            <button ui-sref="editConferenceAdmin({guid: conference.conferenceGuid, schoolGuid: conference.schoolGuid})" class="ui teal button">
                                Edit Conference
                            </button>
                            <button ng-click="ctrl.DeleteConference( conference.conferenceGuid )" class="ui button">
                                <i class="remove icon"></i>
                                {{ ctrl.isProcessing ? "Processing..." : "Delete Conference" }}
                            </button>
                            <button ng-click="ctrl.UnconfirmConference( conference.conferenceGuid )" class="ui right labeled icon button" ng-class="( conference.isConfirmed ? 'red' : 'red' )" ng-disabled="ctrl.isProcessing || !conference.isConfirmed">
                                <i class="remove right icon"></i>
                                {{ ( !conference.isConfirmed ? "Unconfirm" : ctrl.isProcessing ? "Processing..." : ( ctrl.hasButtonMessage ) ? ctrl.buttonMessage : "Unconfirm" ) }}
                            </button>

                        </div>
                    </td>

                </tr>

            </tbody>

        </table>

        <button ui-sref="userWiseAllocation" class="ui green button">
            <i class="plus icon"></i>
            View User-Wise Allocation
        </button>

    </div>

    <div class="dashboard__users--controller">

        <h2>Users</h2>

        <table class="ui celled table">

            <thead>

                <tr>

                    <th>Teacher Escort</th>
                    <th>Email</th>
                    <th>School Name</th>
                    <th>Status</th>

                </tr>

            </thead>

            <tbody>

                <tr ng-repeat="user in ctrl.users">

                    <td>
                        {{ user.teacher_escort }}
                    </td>

                    <td>
                        {{ user.email }}
                    </td>
                    <td>
                        {{ user.school_name }}
                    </td>
                    <td>
                        {{ user.is_confirmed === 1 ? 'Account Confirmed' : 'Account Unconfirmed' }}
                    </td>

                </tr>

            </tbody>

        </table>

        <button ui-sref="addNewUser" class="ui green button">
            <i class="plus icon"></i>
            Add User
        </button>

        <button ng-disabled="ctrl.isProcessing" ng-click="ctrl.RefreshView()" class="ui blue button">
            {{ ctrl.isProcessing ? "Processing..." : "Reload" }}
        </button>

    </div>

</div>

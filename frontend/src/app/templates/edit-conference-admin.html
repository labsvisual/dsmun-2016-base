<div ng-controller="EditConferenceAdminController as ctrl">

    <h1 class="ui header">
        <span style="font-weight: 300;">Edit Conference</span>
    </h1>

    <div class="ui section divider"></div>

    <div class="ui five small steps">

      <div ng-class="( ctrl.conferenceData.registration && ctrl.conferenceData.registration.isFormFilled ) ? 'completed' : 'active'" class="step">

        <i class="tasks icon"></i>

        <div class="content">
          <div class="title">
              <a ng-show="( !ctrl.conferenceData.registration || ( ctrl.conferenceData.registration && ctrl.conferenceData.registration.isFormFilled == false ) )" ui-sref="registrationForm({guid: ctrl.guid})">Registration</a>
              <span ng-show="( ctrl.conferenceData.registration && ctrl.conferenceData.registration.isFormFilled == true )">Registration</span>
          </div>
        </div>

      </div>

      <div ng-class="( ctrl.conferenceData.delegateInformation && ctrl.conferenceData.delegateInformation.isFormFilled ) ? 'completed' : 'active'" class="step">

        <i class="user icon"></i>

        <div class="content">
          <div class="title">
              <a ng-show="( !ctrl.conferenceData.delegateInformation || ( ctrl.conferenceData.delegateInformation && ctrl.conferenceData.delegateInformation.isFormFilled == false ) )" ui-sref="delegateInformationForm({guid: ctrl.guid})">Delegate Information</a>
              <span ng-show="( ctrl.conferenceData.delegateInformation && ctrl.conferenceData.delegateInformation.isFormFilled == true )">Delegate Information</span>
          </div>
        </div>

      </div>

      <div ng-class="( ctrl.conferenceData.travelArrangements && ctrl.conferenceData.travelArrangements.isFormFilled ) ? 'completed' : 'active'" class="step">

        <i class="calendar outline icon"></i>

        <div class="content">
          <div class="title">
              <a ng-show="( !ctrl.conferenceData.travelArrangements || ( ctrl.conferenceData.travelArrangements && ctrl.conferenceData.travelArrangements.isFormFilled == false ) )" ui-sref="travelArrangementsForm({guid: ctrl.guid})">Travel Arrangement</a>
              <span ng-show="( ctrl.conferenceData.travelArrangements && ctrl.conferenceData.travelArrangements.isFormFilled == true )">Travel Arrangement</span>
          </div>
        </div>

      </div>

      <div ng-class="( ctrl.conferenceData.gaCrisis && ctrl.conferenceData.gaCrisis.isFormFilled ) ? 'completed' : 'active'" class="step">

        <i class="square icon"></i>

        <div class="content">
          <div class="title">
              <a ng-show="( !ctrl.conferenceData.gaCrisis || ( ctrl.conferenceData.gaCrisis && ctrl.conferenceData.gaCrisis.isFormFilled == false ) )" ui-sref="gaCrisisForm({guid: ctrl.guid})">GA Crisis</a>
              <span ng-show="( ctrl.conferenceData.gaCrisis && ctrl.conferenceData.gaCrisis.isFormFilled == true )">GA Crisis</span>
          </div>
        </div>

      </div>

    </div>

    <div ng-show="ctrl.isConferenceConfirmed" class="ui green message" style="margin-top: 3em;">

        <div class="header">Conference Confirmed</div>

    </div>

    <div ng-show="ctrl.areFormsFilled && !ctrl.isConferenceConfirmed" class="ui message" style="margin-top: 3em;">

        <div class="header">All Forms Filled</div>
        <p>
            The delegation from {{ ctrl.conferenceData.schoolName }} has filled in all of the
            required forms. You can confirm their conference by clicking
            <a href="javascript:void(0);" ng-click="ctrl.ConfirmConference( ctrl.conferenceData.conferenceGuid )" ng-disabled="ctrl.isProcessing">
                {{ ctrl.isProcessing ? "Processing..." : "Confirm Conference" }}
            </a>
        </p>

    </div>

    <div>

        <form ng-submit="ctrl.UpdateForm()" class="ui seperated form" >

            <div class="admin__form-header ui dividing header">
                <h1>Delegate Information Form</h1>
                <div class="ui checkbox">
                    <input id="delegateInformationCheck" ng-model="ctrl.conferenceData.delegateInformation.isFormFilled" type="checkbox" tabindex="0" class="hidden">
                    <label>Form Confirmed and Filled</label>
                </div>
            </div>

            <div ng-repeat="delegate in ctrl.conferenceData.delegateInformation.delegates" style="padding-bottom: 2.5em;">

                <h4 class="ui dividing header">

                    {{ delegate.name }}

                </h4>

                <div class="field">
                    <input required type="text" ng-model="ctrl.conferenceData.delegateInformation.delegates[ $index ].name" placeholder="Name">
                </div>

                <div class="two fields">
                    <div class="field">
                        <select class="ui dropdown" ng-model="ctrl.conferenceData.delegateInformation.delegates[ $index ].mealPreference">

                            <option value="veg">Vegetarian</option>
                            <option value="nonveg">Non - Vegetarian</option>

                        </select>
                    </div>
                    <div class="field">
                        <select class="ui dropdown" ng-model="ctrl.conferenceData.delegateInformation.delegates[ $index ].gender">

                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="opther">I prefer not to disclose</option>

                        </select>
                    </div>
                </div>


                <div class="field">
                    <select class="ui dropdown" ng-model="ctrl.conferenceData.delegateInformation.delegates[ $index ].committee">

                        <option value="unsc">United Nations Security Council</option>
                        <option value="unscss">Supreme Council of Sovereign States</option>
                        <option value="disec">Disarmament and International Security Committee</option>
                        <option value="au">African Union</option>
                        <option value="ec">European Council</option>
                        <option value="iaea">International Atomic Energy Agency</option>
                        <option value="unhrc">United Nations Human Rights Council</option>
                        <option value="ls">Lok Sabha</option>
                        <option value="ipc">International Press Corps</option>
                        <option value="specpol">Special Political and Decolonisation Committee</option>
                        <option value="scp">United Nations Special Committee on Palestine</option>
                        <option value="odc">United Nations Office of Drugs and Crime</option>
                        <option value="icao">International Civil Aviation Organisation</option>

                    </select>
                </div>

            </div>

            <div ng-disabled="this.shouldDisableAddDelegates" ng-click="ctrl.AddDelegate()" class="ui labeled button" tabindex="0">
                <div class="ui button" ng-class="( ( ctrl.conferenceData.delegateInformation.delegates.length < 17 ) ? 'blue' : 'red' )">
                    <i class="plus icon"></i> Delegate
                </div>
                <a class="ui basic left pointing label" ng-class="( ( ctrl.conferenceData.delegateInformation.delegates.length < 17 ) ? 'blue' : 'red' )">
                    {{ ctrl.conferenceData.delegateInformation.delegates.length || 0 }}
                </a>
            </div>

            <div style="margin-top: 2em; margin-bottom: 2em;" class="ui dividing header">
                <h1>GA Crisis Form</h1>
            </div>

            <div ng-repeat="delegate in ctrl.conferenceData.gaCrisis.delegates" style="padding-bottom: 2.5em;">

                <div class="field">

                    <input type="text" ng-model="ctrl.conferenceData.gaCrisis.delegates[ $index ].name">

                </div>

            </div>

            <div ng-disabled="this.shouldDisableAddGaDelegates" ng-click="ctrl.AddGADelegate()" class="ui labeled button" tabindex="0">
                <div class="ui button" ng-class="( ( ctrl.conferenceData.gaCrisis.delegates.length < 5 ) ? 'blue' : 'red' )">
                    <i class="plus icon"></i> Delegate
                </div>
                <a class="ui basic left pointing label" ng-class="( ( ctrl.conferenceData.gaCrisis.delegates.length < 5 ) ? 'blue' : 'red' )">
                    {{ ctrl.conferenceData.gaCrisis.delegates.length || 0 }}
                </a>
            </div>

            <div class="ui buttons">
                <button ui-sref="dashboardAdmin" ng-disabled="ctrl.processing" class="ui button">Back</button>
                <div class="or"></div>
                <button type="submit" ng-disabled="ctrl.processing" class="ui positive button">{{ ctrl.processing ? "Processing..." : "Save" }}</button>
            </div>


            <div ng-show="ctrl.isMessage" ng-class="ctrl.messageClass" class="ui message">
                <div class="header">
                    {{ ctrl.messageHeader }}
                </div>
                <p>{{ ctrl.messageText }}</p>
            </div>

        </form>

    </div>

    <button style="margin-top: 4em;" class="ui labeled icon button" ui-sref="dashboard">
        <i class="arrow left icon"></i>
        Back
    </button>

</div>

<script>

    $( document ).ready( function() {

        $( '.checkbox' ).checkbox();
        var checkboxDelegateInformation = document.getElementById( 'delegateInformationCheck' );
        checkboxDelegateInformation.onchange = function () {
            console.log( ctrl );
        };

    } );

</script>
